{:title "Tetris in clojurescript and re-frame Part 5"
 :layout :post
 :tags  ["tetris" "html5" "clojuresrcipt" "re-frame" "part 5"]}
 

## Drawing functions

There are several drawing functions:

    (defn draw-block-x [ctx & [line-to-fns]]
      (.beginPath ctx)
      (doseq [f line-to-fns] (f))
      (.fill ctx))
The first one is a helper function taking the canvas and a vector of functions that will be executed.
    
    (defn draw-block-top [x y ctx]
      (draw-block-x ctx [#(.moveTo ctx x y)
                             #(.lineTo ctx (+ 20 x) y)
                             #(.lineTo ctx (+ 18 x) (+ 2 y))
                             #(.lineTo ctx (+ 2 x) (+ 2 y))]))
    
    (defn draw-block-left [x y ctx]
      (draw-block-x ctx [#(.moveTo ctx x y)
                         #(.lineTo ctx x (+ 20 y))
                         #(.lineTo ctx (+ 2 x) (+ 18 y))
                         #(.lineTo ctx (+ 2 x) (+ 2 y))]))
    
    (defn draw-block-right [x y ctx]
      (draw-block-x ctx [#(.moveTo ctx (+ 20 x) y)
                         #(.lineTo ctx (+ 20 x) (+ 20 y))
                         #(.lineTo ctx (+ 18 x) (+ 18 y))
                         #(.lineTo ctx (+ 18 x) (+ 2 y))]))
    
    (defn draw-block-bottom [x y ctx]
      (draw-block-x ctx [#(.moveTo ctx x (+ 20 y))
                         #(.lineTo ctx (+ 20 x) (+ 20 y))
                         #(.lineTo ctx (+ 18 x) (+ 18 y))
                         #(.lineTo ctx (+ 2 x) (+ 18 y))]))
These four functions will draw the for single blocks that each tetrimino contains.


## Sourcecode